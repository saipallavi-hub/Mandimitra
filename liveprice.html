<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Market Prices - MandiMitra</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #b9d8f0;
      color: #333;
      padding: 1rem;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background-color: transparent;
      margin-bottom: 40px;
    }

    .logo img {
      width: 150px;
      height: auto;
    }

    .menu {
      font-size: 24px;
      cursor: pointer;
    }

    .btn-group {
      margin: 20px 0;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn-group button {
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      background-color: #99ff99; /* default inactive color */
      color: #333;
    }

    .btn-group button.active {
      background-color: #4da6ff !important;
      color: white !important;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #aaa;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: #e6f2ff;
    }

    td:nth-child(2) {
      color: red;
    }

    td:nth-child(3) {
      color: green;
    }

    .note {
      margin-top: 10px;
      font-style: italic;
      font-size: 0.9rem;
    }

    #locationDisplay {
      font-weight: bold;
      font-size: 1rem;
      margin-top: 10px;
    }

    .footer-icons {
      position: fixed;
      bottom: 10px;
      left: 10px;
      right: 10px;
      display: flex;
      justify-content: space-between;
    }

    .footer-icons img {
      width: 30px;
    }

    .language-switcher {
      font-size: 20px;
      cursor: pointer;
      position: absolute;
      top: 20px;
      right: 20px;
    }
  </style>
</head>
<body>

  <header class="navbar">
    <div class="logo">
      <img src="https://res.cloudinary.com/dtnmwdkou/image/upload/v1744215563/Untitled_design-removebg-preview_g1gy1h.png" alt="Mandimitra Logo">
    </div>
    <!-- <div class="menu">‚ò∞</div> -->
  </header>

  <div id="locationDisplay">üìç Detecting your location...</div>

  <!-- Language Switcher -->
  <div class="language-switcher" onclick="cycleLanguage()">üåç</div>

  <div class="btn-group">
    <button class="veg active" onclick="updateTable('vegetables', this)">Vegetables</button>
    <button class="oil" onclick="updateTable('oil', this)">Oil seeds</button>
    <button class="pulses" onclick="updateTable('pulses', this)">Pulses</button>
    <button class="fruits" onclick="updateTable('fruits', this)">Fruits</button>
  </div>

  <div id="tableContainer">
    <table>
      <tr>
        <th>Varieties</th>
        <th>Market Price</th>
        <th>Quantity</th>
      </tr>
      <tr><td>Tomato</td><td>‚Çπ1700</td><td>100kg</td></tr>
      <tr><td>Brinjal</td><td>‚Çπ1500</td><td>100kg</td></tr>
      <tr><td>Lady finger</td><td>‚Çπ1100</td><td>100kg</td></tr>
      <tr><td>Onion</td><td>‚Çπ2000</td><td>100kg</td></tr>
      <tr><td>Bell pepper</td><td>‚Çπ1300</td><td>100kg</td></tr>
      <tr><td>Broccoli</td><td>‚Çπ7000</td><td>100kg</td></tr>
      <tr><td>Eggplant</td><td>‚Çπ5000</td><td>100kg</td></tr>
    </table>
  </div>

  <p class="note">Note:‚Äì Rates depend on supply and demand.</p>

  <div class="footer-icons">
    <!-- <img src="https://img.icons8.com/color/48/google-translate.png" alt="Translate"> -->
    <img src="https://img.icons8.com/ios-filled/50/microphone.png" alt="Voice">
  </div>

  <script>
    const geoAPIKey = 'Your_API_Access_Token'; // Replace with real LocationIQ key

    const translations = {
      en: {
        vegetables: "Vegetables",
        oil: "Oil seeds",
        pulses: "Pulses",
        fruits: "Fruits",
        location: "Detecting your location...",
        note: "Note:‚Äì Rates depend on supply and demand.",
        items: {
          vegetables: [
            ["Tomato", "‚Çπ1700", "100kg"],
            ["Brinjal", "‚Çπ1500", "100kg"],
            ["Lady finger", "‚Çπ1100", "100kg"],
            ["Onion", "‚Çπ2000", "100kg"],
            ["Bell pepper", "‚Çπ1300", "100kg"],
            ["Broccoli", "‚Çπ7000", "100kg"],
            ["Eggplant", "‚Çπ5000", "100kg"]
          ],
          pulses: [
            ["Chana (Gram)", "‚Çπ5200", "100kg"],
            ["Masoor (Lentil)", "‚Çπ6000", "100kg"],
            ["Moong", "‚Çπ6500", "100kg"],
            ["Urad", "‚Çπ7000", "100kg"],
            ["Arhar (Tur)", "‚Çπ7500", "100kg"]
          ],
          oil: [
            ["Mustard", "‚Çπ5200", "100kg"],
            ["Groundnut", "‚Çπ4800", "100kg"],
            ["Soybean", "‚Çπ4600", "100kg"],
            ["Sesame", "‚Çπ6000", "100kg"],
            ["Sunflower", "‚Çπ5300", "100kg"]
          ],
          fruits: [
            ["Banana", "‚Çπ900", "100kg"],
            ["Apple", "‚Çπ2500", "100kg"],
            ["Mango", "‚Çπ3000", "100kg"],
            ["Orange", "‚Çπ1800", "100kg"],
            ["Pineapple", "‚Çπ2200", "100kg"]
          ]
        }
      },
      hi: {
        vegetables: "‡§∏‡§¨‡•ç‡§ú‡§º‡§ø‡§Ø‡§æ‡§Å",
        oil: "‡§§‡•á‡§≤ ‡§¨‡•Ä‡§ú",
        pulses: "‡§¶‡§æ‡§≤‡•á‡§Ç",
        fruits: "‡§´‡§≤",
        location: "‡§Ü‡§™‡§ï‡§æ ‡§∏‡•ç‡§•‡§æ‡§® ‡§™‡§π‡§ö‡§æ‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...",
        note: "‡§®‡•ã‡§ü: ‡§¶‡§∞‡•á‡§Ç ‡§Ü‡§™‡•Ç‡§∞‡•ç‡§§‡§ø ‡§î‡§∞ ‡§Æ‡§æ‡§Ç‡§ó ‡§™‡§∞ ‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç‡•§",
        items: {
          vegetables: [
            ["‡§ü‡§Æ‡§æ‡§ü‡§∞", "‚Çπ1700", "100kg"],
            ["‡§¨‡•à‡§Ç‡§ó‡§®", "‚Çπ1500", "100kg"],
            ["‡§≠‡§ø‡§Ç‡§°‡•Ä", "‚Çπ1100", "100kg"],
            ["‡§™‡•ç‡§Ø‡§æ‡§ú", "‚Çπ2000", "100kg"],
            ["‡§∂‡§ø‡§Æ‡§≤‡§æ ‡§Æ‡§ø‡§∞‡•ç‡§ö", "‚Çπ1300", "100kg"],
            ["‡§¨‡•ç‡§∞‡•ã‡§ï‡§≤‡•Ä", "‚Çπ7000", "100kg"],
            ["‡§¨‡•à‡§Ç‡§ó‡§®", "‚Çπ5000", "100kg"]
          ],
          pulses: [
            ["‡§ö‡§®‡§æ (‡§ö‡§®‡§æ)", "‚Çπ5200", "100kg"],
            ["‡§Æ‡§∏‡•Ç‡§∞ (‡§¶‡§æ‡§≤)", "‚Çπ6000", "100kg"],
            ["‡§Æ‡•Ç‡§Ç‡§ó", "‚Çπ6500", "100kg"],
            ["‡§â‡§∞‡§¶", "‚Çπ7000", "100kg"],
            ["‡§Ö‡§∞‡§π‡§∞ (‡§§‡•Ç‡§∞)", "‚Çπ7500", "100kg"]
          ],
          oil: [
            ["‡§∏‡§∞‡§∏‡•ã‡§Ç", "‚Çπ5200", "100kg"],
            ["‡§Æ‡•Ç‡§Ç‡§ó‡§´‡§≤‡•Ä", "‚Çπ4800", "100kg"],
            ["‡§∏‡•ã‡§Ø‡§æ‡§¨‡•Ä‡§®", "‚Çπ4600", "100kg"],
            ["‡§§‡§ø‡§≤", "‚Çπ6000", "100kg"],
            ["‡§∏‡•Ç‡§∞‡§ú‡§Æ‡•Å‡§ñ‡•Ä", "‚Çπ5300", "100kg"]
          ],
          fruits: [
            ["‡§ï‡•á‡§≤‡§æ", "‚Çπ900", "100kg"],
            ["‡§∏‡•á‡§¨", "‚Çπ2500", "100kg"],
            ["‡§Ü‡§Æ", "‚Çπ3000", "100kg"],
            ["‡§∏‡§Ç‡§§‡§∞‡§æ", "‚Çπ1800", "100kg"],
            ["‡§Ö‡§®‡§æ‡§®‡§æ‡§∏", "‚Çπ2200", "100kg"]
          ]
        }
      },
      te: {
        vegetables: "‡∞ï‡±Ç‡∞∞‡∞ó‡∞æ‡∞Ø‡∞≤‡±Å",
        oil: "‡∞Ü‡∞Ø‡∞ø‡∞≤‡±ç ‡∞™‡∞ø‡∞Ç‡∞°‡∞æ‡∞≤‡±Å",
        pulses: "‡∞™‡∞™‡±ç‡∞™‡±Å‡∞≤‡±Å",
        fruits: "‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡±Å",
        location: "‡∞Æ‡±Ä ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞Ç ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞¨‡∞°‡±Å‡∞§‡±ã‡∞Ç‡∞¶‡∞ø...",
        note: "‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï: ‡∞ß‡∞∞‡∞≤‡±Å ‡∞∏‡∞∞‡∞´‡∞∞‡∞æ ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞°‡∞ø‡∞Æ‡∞æ‡∞Ç‡∞°‡±ç ‡∞™‡±à ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞™‡∞°‡∞ø ‡∞â‡∞Ç‡∞ü‡∞æ‡∞Ø‡∞ø.",
        items: {
          vegetables: [
            ["‡∞ü‡∞Æ‡±ã‡∞ü‡∞æ", "‚Çπ1700", "100kg"],
            ["‡∞¨‡∞Ç‡∞ó‡∞æ‡∞≥‡∞æ‡∞¶‡±Å‡∞Ç‡∞™", "‚Çπ1500", "100kg"],
            ["‡∞¨‡∞ø‡∞Ç‡∞°‡∞ø", "‚Çπ1100", "100kg"],
            ["‡∞â‡∞≤‡±ç‡∞≤‡∞ø‡∞™‡∞æ‡∞Ø", "‚Çπ2000", "100kg"],
            ["‡∞¨‡±Ü‡∞≤‡±ç ‡∞™‡∞ø‡∞™‡±ç‡∞™‡∞∞‡±ç", "‚Çπ1300", "100kg"],
            ["‡∞¨‡±ç‡∞∞‡±ã‡∞ï‡±ã‡∞≤‡±Ä", "‚Çπ7000", "100kg"],
            ["‡∞é‡∞ó‡±ç‚Äå‡∞™‡±ç‡∞≤‡∞æ‡∞Ç‡∞ü‡±ç", "‚Çπ5000", "100kg"]
          ],
          pulses: [
            ["‡∞ö‡∞® (‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡±ç)", "‚Çπ5200", "100kg"],
            ["‡∞Æ‡∞∏‡±Ç‡∞∞‡±ç (‡∞™‡∞™‡±ç‡∞™‡±Å)", "‚Çπ6000", "100kg"],
            ["‡∞Æ‡±Ç‡∞Ç‡∞ó‡±ç", "‚Çπ6500", "100kg"],
            ["‡∞â‡∞∞‡∞¶‡±ç", "‚Çπ7000", "100kg"],
            ["‡∞Ö‡∞∞‡∞π‡∞∞‡±ç (‡∞§‡±Ç‡∞∞)", "‚Çπ7500", "100kg"]
          ],
          oil: [
            ["‡∞Æ‡∞∏‡±ç‡∞ü‡∞∞‡±ç‡∞°‡±ç", "‚Çπ5200", "100kg"],
            ["‡∞ó‡±ç‡∞∞‡±å‡∞Ç‡∞°‡±ç‡∞®‡∞ü‡±ç", "‚Çπ4800", "100kg"],
            ["‡∞∏‡±ã‡∞Ø‡∞æ‡∞¨‡±Ä‡∞®‡±ç", "‚Çπ4600", "100kg"],
            ["‡∞§‡±á‡∞≤‡±ç", "‚Çπ6000", "100kg"],
            ["‡∞∏‡±Ç‡∞∞‡±ç‡∞Ø‡∞Æ‡±Å‡∞ñ‡∞ø", "‚Çπ5300", "100kg"]
          ],
          fruits: [
            ["‡∞Ö‡∞∞‡∞ü‡∞ø‡∞™‡∞Ç‡∞°‡±Å", "‚Çπ900", "100kg"],
            ["‡∞Ü‡∞™‡∞ø‡∞≤‡±ç", "‚Çπ2500", "100kg"],
            ["‡∞Æ‡∞æ‡∞Æ‡∞ø‡∞°‡∞ø", "‚Çπ3000", "100kg"],
            ["‡∞∏‡∞Ç‡∞§‡∞∞‡∞æ", "‚Çπ1800", "100kg"],
            ["‡∞Ö‡∞®‡∞æ‡∞®‡∞æ‡∞∏‡±Å", "‚Çπ2200", "100kg"]
          ]
        }
      }
    };

    let currentLang = localStorage.getItem("selectedLanguage") || "en";
    const langList = ["en", "hi", "te"];

    function getLocation() {
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(success, error);
      } else {
        document.getElementById("locationDisplay").innerText = translations[currentLang].location;
      }
    }

    function success(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const url = `https://us1.locationiq.com/v1/reverse?key=${geoAPIKey}&lat=${lat}&lon=${lon}&format=json`;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          const city = data.address.city || data.address.town || data.address.village || '';
          const state = data.address.state || '';
          document.getElementById("locationDisplay").innerText = `üìç ${city}, ${state}`;
        })
        .catch(err => {
          console.error('Location fetch error:', err);
          document.getElementById("locationDisplay").innerText = "üìç Location unavailable";
        });
    }

    function error(err) {
      console.warn(`ERROR(${err.code}): ${err.message}`);
      document.getElementById("locationDisplay").innerText = "üìç Location permission denied.";
    }

    function updateTable(category, clickedBtn) {
      document.querySelectorAll(".btn-group button").forEach(btn => {
        btn.classList.remove("active");
        btn.style.backgroundColor = "#99ff99"; // make others green
        btn.style.color = "#333";
      });

      clickedBtn.classList.add("active");
      clickedBtn.style.backgroundColor = "#4da6ff";
      clickedBtn.style.color = "white";

      let html = `
        <table>
          <tr>
            <th>Varieties</th>
            <th>Market Price</th>
            <th>Quantity</th>
          </tr>`;

      const categories = translations[currentLang].items;

      categories[category].forEach(item => {
        html += `
          <tr>
            <td>${item[0]}</td>
            <td>${item[1]}</td>
            <td>${item[2]}</td>
          </tr>`;
      });

      html += `</table>`;
      document.getElementById("tableContainer").innerHTML = html;
    }

    function cycleLanguage() {
      const langIndex = (langList.indexOf(currentLang) + 1) % langList.length;
      currentLang = langList[langIndex];
      localStorage.setItem("selectedLanguage", currentLang);
      loadContent();
    }

    function loadContent() {
      const lang = translations[currentLang];
      document.getElementById("locationDisplay").innerText = lang.location;
      document.querySelector(".veg").innerText = lang.vegetables;
      document.querySelector(".oil").innerText = lang.oil;
      document.querySelector(".pulses").innerText = lang.pulses;
      document.querySelector(".fruits").innerText = lang.fruits;
      document.querySelector(".note").innerText = lang.note;
      updateTable('vegetables', document.querySelector('.veg'));
    }

    // Initial render of items
    loadContent();
    getLocation();
  </script>

</body>
</html>
